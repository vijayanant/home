const navToggle=document.querySelector(".nav-toggle"),navList=document.querySelector(".nav-list"),navLinks=document.querySelectorAll(".nav-link"),header=document.querySelector("header"),sections=document.querySelectorAll("section[id]");window.addEventListener("scroll",()=>{window.scrollY>100?header.classList.add("header-scrolled"):header.classList.remove("header-scrolled");let e="";sections.forEach(t=>{let s=t.offsetTop-header.offsetHeight,r=t.clientHeight;pageYOffset>=s&&pageYOffset<s+r&&(e=t.getAttribute("id"))}),navLinks.forEach(t=>{t.classList.remove("active"),t.href.includes(e)&&t.classList.add("active")})}),navToggle.addEventListener("click",()=>{navList.classList.toggle("active"),navToggle.classList.toggle("active")}),navLinks.forEach(e=>{e.addEventListener("click",()=>{navList.classList.remove("active"),navToggle.classList.remove("active")})});const latestPostsGrid=document.querySelector("#latest-posts-grid"),latestPostsTitle=document.querySelector("#latest-posts-title"),substackUrl="https://vijayanant.substack.com",corsProxy="https://api.allorigins.win/get?url=";async function fetchPosts(){if(latestPostsGrid)try{let e=await fetch(`https://api.allorigins.win/get?url=${encodeURIComponent("https://vijayanant.substack.com/feed")}`);if(!e.ok)throw Error(`HTTP error! status: ${e.status}`);let t=await e.json(),s=new DOMParser,r=s.parseFromString(t.contents,"application/xml"),a=r.querySelectorAll("item"),i="",l=0;a.forEach(e=>{if(l<3){let t=e.querySelector("title").textContent,s=e.querySelector("link").textContent,r=new Date(e.querySelector("pubDate").textContent),a=e.querySelector("description").textContent.trim();i+=`
                    <div class="writing-item">
                        <h3 class="writing-title"><a href="${s}" target="_blank" rel="noopener noreferrer">${t}</a></h3>
                        <p class="writing-meta"><span>${r.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}</span></p>
                        <p class="writing-description">${a}</p>
                        <a href="${s}" class="read-more-button" target="_blank" rel="noopener noreferrer">Read More &rarr;</a>
                    </div>
                `,l++}}),""!==i&&(latestPostsTitle.style.display="block",latestPostsGrid.innerHTML=i)}catch(o){console.error("Error fetching Substack posts:",o)}}fetchPosts();