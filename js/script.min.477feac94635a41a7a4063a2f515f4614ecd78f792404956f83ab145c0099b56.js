const navToggle=document.querySelector(".nav-toggle"),navList=document.querySelector(".nav-list"),navLinks=document.querySelectorAll(".nav-link"),header=document.querySelector("header"),sections=document.querySelectorAll("section[id]");window.addEventListener("scroll",()=>{window.scrollY>100?header.classList.add("header-scrolled"):header.classList.remove("header-scrolled");let e="";sections.forEach(t=>{const n=t.offsetTop-header.offsetHeight,s=t.clientHeight;pageYOffset>=n&&pageYOffset<n+s&&(e=t.getAttribute("id"))}),navLinks.forEach(t=>{t.classList.remove("active"),t.href.includes(e)&&t.classList.add("active")})}),navToggle.addEventListener("click",()=>{navList.classList.toggle("active"),navToggle.classList.toggle("active")}),navLinks.forEach(e=>{e.addEventListener("click",()=>{navList.classList.remove("active"),navToggle.classList.remove("active")})});const latestPostsGrid=document.querySelector("#latest-posts-grid"),latestPostsTitle=document.querySelector("#latest-posts-title"),substackUrl="https://vijayanant.substack.com",corsProxy="https://api.allorigins.win/get?url=";async function fetchPosts(){if(!latestPostsGrid)return;try{const e=await fetch(`${corsProxy}${encodeURIComponent(substackUrl+"/feed")}`);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const s=await e.json(),o=new DOMParser,i=o.parseFromString(s.contents,"application/xml"),a=i.querySelectorAll("item");let t="",n=0;a.forEach(e=>{if(n<3){const o=e.querySelector("title").textContent,s=e.querySelector("link").textContent,i=new Date(e.querySelector("pubDate").textContent),a=e.querySelector("description").textContent.trim();t+=`
                    <div class="writing-item">
                        <h3 class="writing-title"><a href="${s}" target="_blank" rel="noopener noreferrer">${o}</a></h3>
                        <p class="writing-meta"><span>${i.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}</span></p>
                        <p class="writing-description">${a}</p>
                        <a href="${s}" class="read-more-button" target="_blank" rel="noopener noreferrer">Read More &rarr;</a>
                    </div>
                `,n++}}),t!==""&&(latestPostsTitle.style.display="block",latestPostsGrid.innerHTML=t)}catch(e){console.error("Error fetching Substack posts:",e)}}fetchPosts()