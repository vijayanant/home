const navToggle=document.querySelector(".nav-toggle");const navList=document.querySelector(".nav-list");const navLinks=document.querySelectorAll(".nav-link");const header=document.querySelector("header");const sections=document.querySelectorAll("section[id]");window.addEventListener("scroll",()=>{if(window.scrollY>100){header.classList.add("header-scrolled")}else{header.classList.remove("header-scrolled")}let current="";sections.forEach(section=>{const sectionTop=section.offsetTop-header.offsetHeight;const sectionHeight=section.clientHeight;if(pageYOffset>=sectionTop&&pageYOffset<sectionTop+sectionHeight){current=section.getAttribute("id")}});navLinks.forEach(link=>{link.classList.remove("active");if(link.href.includes(current)){link.classList.add("active")}})});navToggle.addEventListener("click",()=>{navList.classList.toggle("active");navToggle.classList.toggle("active")});navLinks.forEach(link=>{link.addEventListener("click",()=>{navList.classList.remove("active");navToggle.classList.remove("active")})});const latestPostsGrid=document.querySelector("#latest-posts-grid");const latestPostsTitle=document.querySelector("#latest-posts-title");const substackUrl="https://vijayanant.substack.com";const corsProxy="https://api.allorigins.win/get?url=";async function fetchPosts(){if(!latestPostsGrid)return;try{const response=await fetch(`${corsProxy}${encodeURIComponent(substackUrl+"/feed")}`);if(!response.ok){throw new Error(`HTTP error! status: ${response.status}`)}const data=await response.json();const parser=new DOMParser;const xmlDoc=parser.parseFromString(data.contents,"application/xml");const items=xmlDoc.querySelectorAll("item");let postsHtml="";let count=0;items.forEach(item=>{if(count<3){const title=item.querySelector("title").textContent;const link=item.querySelector("link").textContent;const pubDate=new Date(item.querySelector("pubDate").textContent);const description=item.querySelector("description").textContent.trim();postsHtml+=`\n                    <div class="writing-item">\n                        <h3 class="writing-title"><a href="${link}" target="_blank" rel="noopener noreferrer">${title}</a></h3>\n                        <p class="writing-meta"><span>${pubDate.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}</span></p>\n                        <p class="writing-description">${description}</p>\n                        <a href="${link}" class="read-more-button" target="_blank" rel="noopener noreferrer">Read More &rarr;</a>\n                    </div>\n                `;count++}});if(postsHtml!==""){latestPostsTitle.style.display="block";latestPostsGrid.innerHTML=postsHtml}}catch(error){console.error("Error fetching Substack posts:",error)}}fetchPosts();